<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DogeNode - Gana Dogecoin</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; padding: 0; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { Wifi, Zap, TrendingUp, Gift, Users, Clock, Wallet, ExternalLink } = (() => {
            const iconProps = { className: 'lucide-icon' };
            return {
                Wifi: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 20h.01"/><path d="M2 8.82a15 15 0 0 1 20 0"/><path d="M5 12.859a10 10 0 0 1 14 0"/><path d="M8.5 16.429a5 5 0 0 1 7 0"/></svg>,
                Zap: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M13 2 3 14h9l-1 8 10-12h-9l1-8z"/></svg>,
                TrendingUp: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>,
                Gift: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"/></svg>,
                Users: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
                Clock: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
                Wallet: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"/><path d="M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"/></svg>,
                ExternalLink: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M15 3h6v6"/><path d="M10 14 21 3"/><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/></svg>
            };
        })();

        function DogeNodeApp() {
            const [isConnected, setIsConnected] = useState(false);
            const [earnings, setEarnings] = useState(0);
            const [bandwidthShared, setBandwidthShared] = useState(0);
            const [uptime, setUptime] = useState(0);
            const [referrals, setReferrals] = useState(0);
            const [walletConnected, setWalletConnected] = useState(false);
            const [walletAddress, setWalletAddress] = useState('');
            const [extensionInstalled, setExtensionInstalled] = useState(false);

            useEffect(() => {
                const checkExtension = () => {
                    if (window.DogeNode && window.DogeNode.isExtensionInstalled()) {
                        setExtensionInstalled(true);
                        
                        window.DogeNode.on('onWalletConnected', (wallet) => {
                            setWalletConnected(true);
                            setWalletAddress(wallet.address);
                        });
                        
                        window.DogeNode.on('onWalletDisconnected', () => {
                            setWalletConnected(false);
                            setWalletAddress('');
                        });
                        
                        window.DogeNode.on('onWithdrawal', (data) => {
                            setEarnings(prev => Math.max(0, prev - data.amount));
                            alert(`✅ Retiro exitoso: ${data.amount} DOGE\nTx: ${data.txHash}`);
                        });
                    }
                };
                
                checkExtension();
                window.addEventListener('dogenode:ready', checkExtension);
                const interval = setInterval(checkExtension, 1000);
                
                return () => {
                    window.removeEventListener('dogenode:ready', checkExtension);
                    clearInterval(interval);
                };
            }, []);

            useEffect(() => {
                if (!isConnected) return;

                const earningsInterval = setInterval(() => {
                    setEarnings(prev => prev + (Math.random() * 0.5 + 0.1));
                    setBandwidthShared(prev => prev + (Math.random() * 50 + 20));
                }, 2000);

                const uptimeInterval = setInterval(() => {
                    setUptime(prev => prev + 1);
                }, 1000);

                return () => {
                    clearInterval(earningsInterval);
                    clearInterval(uptimeInterval);
                };
            }, [isConnected]);

            useEffect(() => {
                const balanceElement = document.getElementById('doge-balance-data');
                if (balanceElement) {
                    balanceElement.setAttribute('data-doge-balance', earnings.toString());
                }
            }, [earnings]);

            const formatTime = (seconds) => {
                const hrs = Math.floor(seconds / 3600);
                const mins = Math.floor((seconds % 3600) / 60);
                const secs = seconds % 60;
                return `${hrs.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            const toggleConnection = () => {
                setIsConnected(!isConnected);
                if (isConnected) {
                    setUptime(0);
                }
            };

            const openExtension = () => {
                if (!extensionInstalled) {
                    alert('Por favor instala la extensión DogeNode primero');
                    return;
                }
                alert('Haz clic en el ícono de la extensión DogeNode en tu navegador para conectar tu wallet');
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-yellow-400 via-orange-400 to-yellow-500 p-6">
                    <div className="max-w-6xl mx-auto">
                        <header className="text-center mb-8">
                            <div className="flex items-center justify-center gap-3 mb-2">
                                <Zap className="w-12 h-12 text-white" />
                                <h1 className="text-5xl font-bold text-white">DogeNode</h1>
                            </div>
                            <p className="text-white text-lg">Gana Dogecoin compartiendo tu ancho de banda</p>
                        </header>

                        {extensionInstalled && (
                            <div className="bg-white rounded-2xl shadow-xl p-4 mb-6">
                                <div className="flex items-center justify-between">
                                    <div className="flex items-center gap-3">
                                        <div className={`w-3 h-3 rounded-full ${walletConnected ? 'bg-green-500 animate-pulse' : 'bg-gray-300'}`}></div>
                                        <Wallet className="w-5 h-5 text-gray-600" />
                                        <span className="font-semibold text-gray-800">
                                            {walletConnected 
                                                ? `Wallet: ${walletAddress.substring(0, 8)}...${walletAddress.substring(walletAddress.length - 6)}`
                                                : 'Wallet no conectada'}
                                        </span>
                                    </div>
                                    <button
                                        onClick={openExtension}
                                        className="px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-semibold transition flex items-center gap-2"
                                    >
                                        <Wallet className="w-4 h-4" />
                                        {walletConnected ? 'Gestionar' : 'Conectar Wallet'}
                                    </button>
                                </div>
                            </div>
                        )}

                        {!extensionInstalled && (
                            <div className="bg-yellow-100 border-2 border-yellow-400 rounded-2xl p-6 mb-6">
                                <div className="flex items-start gap-4">
                                    <div className="text-4xl">⚠️</div>
                                    <div className="flex-1">
                                        <h3 className="font-bold text-gray-800 mb-2 text-lg">Extensión requerida para retirar</h3>
                                        <p className="text-gray-700 mb-4">
                                            Para poder conectar tu wallet y retirar tus ganancias en DOGE, necesitas instalar nuestra extensión de navegador.
                                        </p>
                                        <button className="px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-bold transition flex items-center gap-2">
                                            <ExternalLink className="w-5 h-5" />
                                            Instalar Extensión
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        <div className="bg-white rounded-3xl shadow-2xl p-8 mb-6">
                            <div className="text-center mb-8">
                                <div className="inline-flex items-center gap-2 mb-2">
                                    <div className="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center text-white text-2xl font-bold">Ð</div>
                                    <h2 
                                        className="text-6xl font-bold text-gray-800" 
                                        id="doge-balance-data"
                                        data-doge-balance={earnings}
                                    >
                                        {earnings.toFixed(2)} DOGE
                                    </h2>
                                </div>
                                <p className="text-gray-500 text-lg">Ganancias totales</p>
                            </div>

                            <div className="flex justify-center mb-8">
                                <button
                                    onClick={toggleConnection}
                                    className={`px-12 py-4 rounded-full font-bold text-xl transition-all transform hover:scale-105 ${
                                        isConnected
                                            ? 'bg-red-500 hover:bg-red-600 text-white'
                                            : 'bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-white shadow-lg'
                                    }`}
                                >
                                    <span className="flex items-center gap-2">
                                        <Wifi className={isConnected ? "animate-pulse" : ""} />
                                        {isConnected ? 'Desconectar' : 'Conectar y Ganar'}
                                    </span>
                                </button>
                            </div>

                            {isConnected && (
                                <div className="text-center mb-6">
                                    <div className="inline-flex items-center gap-2 px-6 py-2 bg-green-100 text-green-700 rounded-full">
                                        <div className="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                        <span className="font-semibold">Conectado y ganando</span>
                                    </div>
                                </div>
                            )}

                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div className="bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-6 text-center">
                                    <TrendingUp className="w-8 h-8 text-blue-500 mx-auto mb-3" />
                                    <p className="text-gray-600 text-sm mb-1">Ancho de Banda</p>
                                    <p className="text-3xl font-bold text-gray-800">{bandwidthShared.toFixed(0)} MB</p>
                                </div>

                                <div className="bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6 text-center">
                                    <Clock className="w-8 h-8 text-purple-500 mx-auto mb-3" />
                                    <p className="text-gray-600 text-sm mb-1">Tiempo Activo</p>
                                    <p className="text-3xl font-bold text-gray-800">{formatTime(uptime)}</p>
                                </div>

                                <div className="bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 text-center">
                                    <Users className="w-8 h-8 text-green-500 mx-auto mb-3" />
                                    <p className="text-gray-600 text-sm mb-1">Referidos</p>
                                    <p className="text-3xl font-bold text-gray-800">{referrals}</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-3xl shadow-2xl p-8 mb-6">
                            <h3 className="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                                <Gift className="text-yellow-500" />
                                ¿Cómo funciona?
                            </h3>
                            <div className="grid md:grid-cols-4 gap-6">
                                <div className="text-center">
                                    <div className="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span className="text-2xl font-bold text-yellow-600">1</span>
                                    </div>
                                    <h4 className="font-bold text-gray-800 mb-2">Instala</h4>
                                    <p className="text-gray-600 text-sm">Instala la extensión del navegador</p>
                                </div>
                                <div className="text-center">
                                    <div className="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span className="text-2xl font-bold text-orange-600">2</span>
                                    </div>
                                    <h4 className="font-bold text-gray-800 mb-2">Conecta</h4>
                                    <p className="text-gray-600 text-sm">Conecta tu wallet favorita</p>
                                </div>
                                <div className="text-center">
                                    <div className="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span className="text-2xl font-bold text-yellow-600">3</span>
                                    </div>
                                    <h4 className="font-bold text-gray-800 mb-2">Gana</h4>
                                    <p className="text-gray-600 text-sm">Comparte tu ancho de banda y gana DOGE</p>
                                </div>
                                <div className="text-center">
                                    <div className="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                        <span className="text-2xl font-bold text-orange-600">4</span>
                                    </div>
                                    <h4 className="font-bold text-gray-800 mb-2">Retira</h4>
                                    <p className="text-gray-600 text-sm">Retira tus DOGE a tu wallet</p>
                                </div>
                            </div>
                        </div>

                        <div className="bg-gradient-to-r from-yellow-400 to-orange-500 rounded-3xl shadow-2xl p-8 text-white">
                            <h3 className="text-2xl font-bold mb-4 flex items-center gap-2">
                                <Users />
                                Programa de Referidos
                            </h3>
                            <p className="mb-6 text-lg">Gana 10% extra de las ganancias de tus referidos de por vida</p>
                            <div className="bg-white bg-opacity-20 rounded-xl p-4 backdrop-blur-sm">
                                <p className="text-sm mb-2 font-semibold">Tu enlace de referido:</p>
                                <div className="flex gap-2">
                                    <input
                                        type="text"
                                        value="https://dogenode.com/ref/DEMO123"
                                        readOnly
                                        className="flex-1 px-4 py-2 rounded-lg bg-white bg-opacity-30 text-white placeholder-white placeholder-opacity-70"
                                    />
                                    <button className="px-6 py-2 bg-white text-orange-500 rounded-lg font-bold hover:bg-opacity-90 transition">
                                        Copiar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <footer className="text-center mt-8 text-white">
                            <p className="text-sm opacity-80">
                                {extensionInstalled 
                                    ? '✅ Extensión instalada - Conecta tu wallet para retirar'
                                    : '⚠️ Instala la extensión para poder retirar tus ganancias'}
                            </p>
                        </footer>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<DogeNodeApp />, document.getElementById('root'));
    </script>
</body>
</html>